

% !TeX encoding = windows-1250
\chapter{Softverski alati}
\qquad Prije samog riješavanja problematike kako napraviti navedenu aplikaciju, potrebno je objasniti što su i kako funkcioniraju korišteni softverski alati. Definirati ?e se i koji su preduvjeti, tj. knjižnice ili alati koji svaki od njih zahtjeva da se mo?e odraditi funkcija koja im se zada za prethodno navedenu svrhu.

\qquad Korištene su najnovije dostupne a stabilne inaèice korištenih alata:
\begin{enumerate}
	\item ROS Noetic Ninjemys - datum izlaska 23. svibnja 2020.
	\item Unity 2019. LTS - izašlo polovicom 2020. godine
	\item ROS\# 1.6 - datum izlaska 20. prosinca 2019.
\end{enumerate}
Sve to na najnovijoj tada dostupnoj LTS verziji Linux Ubuntu operacijskog sustava, 20.04 LTS.

\section{ROS}
\qquad Robotski Operacijski Sustav (ROS) je radni okvir (eng. framework) koji se instalira u Linux operacijski sustav i unatoè tome što sadrži rijeèi operacijski sustav, on to nije. Postoji i eksperimentalna verzija za Windows 10 i OS X, no ovaj æe se rad usredotoèiti na razvoj na Linux-u. Jedna od najbitnijih karakteristika ROS sustava jest da je omoguæena komunikacija i upravljanje hardverom robota preko softverskih alata ROS-a bez da se treba imati posebno znanje o korištenom hardveru.

\qquad ROS se ponajviše koristio u znanstvene i obrazovne svrhe, ali se zbog svoje praktiènosti i potencijala ubrzo proširio i u ostale grane robotike. Prije prelaska na ROS, svaki proizvoðaè robota je je trebao razvijati svoj API (Application Programming Interface) za komunikaciju i upravljanje svojim robotima. Sada roboti diljem svijeta veæinom koriste ROS kao svoj primarni sustav za komunikaciju i upravljanje, te je zbog toga vrlo korisno nauèiti ROS. Sa istim znanjem i vještinama moguæe je razvijati softver koji æe poslužiti na razlièitim robotima, razlièitih proizvoðaèa, upravo radi ROS unificiranja. 

\qquad ROS sadrži razne alate i knjižnice, koji su razvijeni i posloženi po odreðenoj ROS konvenciji. Sve zajedno jako pojednostavljuje razvoj novih robotskih softvera i omoguæava kompleksno ponašanje robota. Takoðer ROS sadrži razne upravljaèke programe i algoritme, i sve je otvorenog koda - besplatno.\cite{rosurl}

\qquad Nedavno je razvijen i novi ROS, ROS 2. Prva službena verzija izdana je krajem 2017. Iako je preporuèljivo koristiti više future-proof tehnologije, za ovaj rad odabran je ROS 1 iz razloga što neki od kritiènih alata za uspjeh rada nisu podržani na najnovijim verzijama ROS-a 2. Unatoè tome što je ROS 2 više future-proof i noviji, ROS 1 se i dalje razvija te nova verzija izlazi svake godine. Neke od razlika izmeðu ROS-a 1 i 2 navedene su u tablici \ref{tab:rosversions}.
\begin{table}[!htbp]
	\scriptsize
	\renewcommand{\arraystretch}{1.2}
	\caption{ROS 1 i ROS 2 bitne razlike}
	\centering
	\begin{tabular}{|c|c|c|}
		\hline
		Znaèajka & ROS 1 & ROS 2
		\\ [0.5ex]
		\hline \hline
		Testirane platforme & Ubuntu & Ubuntu, OS X, Windows 10 \\ [0.5ex] % razmak do iducega retka
		C++ & C++11 & C++14, C++17 \\ [0.5ex]
		Python & Python 2 (Noetic Python 3) & Python 3.5 \\ [0.5ex]
		Roslaunch & XML & Python - kompleksnija logika \\ [0.5ex]
		Èvor u procesu & 1 & Više od 1 \\ [0.5ex]
		& Velika zajednica s puno stabilnih & Minimalne ovisnosti, bolja prenosivost, \\
		Ostalo & i odliènih paketa. & pouzdanost, perzistentnost i rad \\
		&  Puno literature i tutorijala. & u stvarnom vremenu (real-time).\\ [0.5ex]
		\hline
	\end{tabular}
	\label{tab:rosversions}
\end{table}

\section{Unity}
\qquad Unity je cross-platform (multi-platformsko) razvojno okruženje, primarno za razvijanje raèunalnih igra. Sveukupni razvoj Unity razvojnog okruženja radi amerièka korporacija Unity Technologies. Takoðer, sam softver je besplatan za edukacijske i osobne svrhe te komercijalne svrhe do 100.000 amerièkih dolara prihoda. Postoji veliki izbor besplatnih i ne besplatnih paketa koji se može koristiti za ubrzati i olakšati odreðene zadatke, a to se sve nalazi na tzv. "Unity Asset Store". \cite{unityassetstore}

\qquad Unity LTS (Long Term Support) verzija se u tekuæoj godini dovrši za prošlu - Unity 2019. LTS je došao sredinom 2020. godine, a nova, 2020. verzija je veæ dostupna i ona se postepeno nadograðuje. LTS verzija se svakog tjedna ažurira novim zakrpama.
\subsection{Editor}

\qquad Unity Editor je glavni alat za razvoj (slika~\ref{fig:unityeditor}). U njemu se radi veæina razvoja oko vizualnih elemenata i interakcije izmeðu njih. Glavne komponente ureðivaèa su sljedeæe: 
\begin{itemize}
	\item Hierarchy (hijerarhija) - Hijerarhijski prikaz svih elemenata u trenutnoj sceni. Unity svoje elemente u sceni naziva GameObject (igraèi objekt). 
	\item Scene (scena) - Glavni prozor gdje se radi sve u vezi s elementima koji se mogu grafièki prikazati.
	\item Game (igra) - Prozor koji služi kao emulacija igre. Pritiskom na "Play" gumb pokreæe se igra i ovaj pokreæe se ovaj prozor gdje se može igrati i vidjeti što i kako radi nakon izrade u prozoru scene.
	\item Inspector (inspektor) - Nakon odabira odreðenog elementa iz hijerarhije (element se takoðer može odabrati i u sceni), ovdje se prikazuju sve komponente nadodane na taj odabrani element tj. GameObject. Mogu se dodavati razne komponente koje Unity pruža, tipa prikaz slika i teksta, animacije, efekti i još mnogo toga, ali i skripte koje sama osoba koja razvija softver može napisati.
	\item Console (konzola) - Mjesto gdje se ispisuju sve poruke, upozorenja i greške. 
	\item Project (projekt) - Ovime se može upravljati arhitekturom projekta. Od klasiènog stvaranja mapa i datoteka, imenovanja i ostalog, do dodavanja specifiènih Unity dodataka.
	\item Ostalo - Meni traka u kojoj se mogu pristupiti svim ostalim postavkama (ukljuèujuæi i veæ navedenim stavkama). Dodatni alati se mogu postaviti kao aktivni i vidljivi, npr. pristup Asset Store-u, panel za animacije i animator te ostale stvari koje nisu vezane za zadatak ovog rada. 
\end{itemize}
\begin{figure}[!htbp]
	\begin{center}
		\includegraphics[height=12cm,width=21cm,keepaspectratio=true]{unitySS}
		\caption{Unity Editor}
		\label{fig:unityeditor}
	\end{center}
\end{figure}

\newpage
\subsection{Skripte}

\qquad Unity takoðer svojim korisnicima omoguæava programiranje vlastitih (ili korištenje tuðih) skripta. Programiranje se vrši u C\# programskom jeziku, koji se izvršava na \textit{Mono} razvojnom okruženju. Takoðer, moguæe je skripte programirati u \textit{JavaScriptu}, ali je podrška lošija.

\qquad Cilj \textit{Mono} razvojnog okruženja je da omoguæi korištenje .NET Framework-a na razne operacijske sustave, jer je inaèe .NET framework razvijen od strane Microsofta samo za Windows OS. Komponente \textit{Mono} framework-a ukljuèuju:
\begin{itemize}
	\item C\# kompajler - Potpun kompajler, sa svim znaèajkama od C\# 1.0 do 6.0.
	\item Mono Runtime \cite{monoabout} - Glavne komponente:
	\begin{itemize}
		\item Just-in-Time (JIT) kompajler - kompilacija koda tokom izvršavanja programa. 
		\item Ahead-of-Time (AOT) kompajler - kompilacija koda u nativni kod stroja gdje æe se izvršavati, prije njegovog izvršavanja.
		\item Èitaè knjižnica - omoguæuje nam uèitavanje vanjskih programskih knjižnica.
		\item Sakupljaè smeæa (Garbage collector) - automatsko brisanje objekata u memoriji koji se više ne koriste.
		\item Dretveni sustav - omoguæava izvršavanje više dretva (threads) istovremeno, pospješuje brzinu i produktivnost odreðenog programa ako je isprogramirano na pametan naèin.
		\item Interoperabilnost - karakteristika da više programskih sustava mogu bez poteškoæa meðusobno funkcionirati.
	\end{itemize}

	\item .NET Framework knjižnica klasa - \textit{Mono} platforma pruža set klasa kao temelj za razvijanje aplikacija. Navedene su klase kompatibilne s Microsoftovim .NET Framework klasama.
	\item \textit{Mono} pruža i dodatne klase koje nisu ukljuèene u Microsoftovim baznim klasama koje su posebice korisne za razvijanje Linux aplikacija, npr. Gtk+, Zip, OpenGL, Cairo, POSIX i druge.
\end{itemize}
\qquad Glavne znaèajke \textit{Mono} radnog okruženja:
\begin{itemize}
	\item Multi-platformsko radno okruženje - Linux, macOS, BSD, Microsoft Windows.
	\item Multi-jezièan - C\#, VB 8, Java, Python, Ruby i još mnogi.
	\item Kompatibilan s binarnim kodom.
	\item Kompatibilan s Microsoft APIjem - pokreæe ASP.NET, ADO.NET, Silverlight i Windows.Forms.
	\item Otvorenog koda i besplatan - sav \textit{Mono} sadržaj, ukljuèujuæi i knjižnice, distribuiran je koristeæi MIT licencu.
	\item Opsežna pokrivenost - implementacije mnogih popularnih knjižnica i protokola.
\end{itemize}

\qquad Programiranje prilagoðenih skripti omoguæava kompleksna ponašanja i radnje u igri/softveru kojega se razvija. Gotovo sve akcije koje se može napraviti u Editoru, može se i u skripti, te se time može drastièno poveæati opseg moguænosti.
\begin{lstlisting}
#include <stdio.h>

int main(int argc, char ** argv)
{
printf("Hello world!\n");
return 0;
}
\end{lstlisting}
\section{ROS\#}
\qquad ROS\# je set programskih knjižnica i alata otvorenog koda u C\#-u koja omoguæuje komunikaciju izmeðu ROS-a i .NET aplikacija - Unity-ja, razvijen od strane Siemens kompanije. ROS\# je bio primarno razvijen za Windows OS, ali se uspješno može koristiti i na druge operacijske sustave. Paket se može preuzeti s Unity Asset Store-a ili direktno sa službenog Github repozitorija. \cite{rossharprepo} Ovo je ujedno i glavni alat koji æe se koristiti u ovom radu za stvaranje mosta izmeðu ROS-a i Unity-a.

\qquad Glavni sadržaj ovog paketa je sljedeæi:
\begin{itemize}
	\item .NET riješenje za RosBridgeClient (knjižnica koja omoguæuje spajanje vanjskih aplikacija na ROS sustav), Urdf (robotski modeli) i MessageGeneration (generiranje poruka).
	\item ROS paketi korišteni od strane ROS\#-a.
	\item Unity projekt koji sadrži primjer scenu te RosBridgeClient, Urdf i MessageGeneration ekstenzije za Unity.
\end{itemize}
